{% extends 'index.html' %}
{% block title %}{{ article.title }}{% endblock %}
{% block inner-title %}{{ article.title }}{% endblock %}
{% block article_activate %}active-menu{% endblock %}
{% block home_activate %}{% endblock %}
{% block content %}
	<div class="gallery-head">
		<h4>{{ article.date }}</h4>
		<br/>
	</div>
	<div class="card" style="padding: 20px;">
		<div class="blog">
			{{ article.body | safe }}
		</div>
	</div>
	{% block comments %}
	<style>
	#comment-submit {
		position: absolute;
        right: -2px;
        bottom: -2px;
        background: #233342;
        border: none;
        border: 2px solid;
        border-color: #121821;
        border-left: none;
        border-top: none;
        padding: 0px;
        width: 100px;
        height: 38px;
        color: #FFF;
        outline: 0;
        border-radius: 0 0 2px 0;
        font-size: 16px;
        z-index: 6;
    }
    #comment-submit:hover {
        background: #FBFBFB;
        border-color: #CCD4D9;
        color: #121821;
        border-top: solid 1px #F2F2F2;
    }
    .comment-box {
        border: 2px solid #CCD4D9;
        border-radius: 2px;
        padding: 4px 4px 0px;
        background-color: #FFF;
        position: relative;
        z-index: 10;
    }
    #comment-textarea {
        width: 100%;
        resize: none;
        overflow-x: hidden;
        overflow-y: auto;
        border: none;
        line-height: 22px;
        font-size: 14px;
        outline: 0;
        color: #666;
        height: 68px;
    }
    .comment-ctrl {
        background-color: #FBFBFB;
        height: 36px;
	    margin-left: -4px;
        border-top: solid 1px #F2F2F2;
        z-index: 5;
    }
    .comment-prompt {
        cursor: pointer;
        display: none;
        text-align: center;
        font-size: 14px;
        line-height: 38px;
        color: #3399CC;
    }
    .comment-success {
        cursor: pointer;
        display: none;
        text-align: center;
        font-size: 14px;
        line-height: 38px;
        color: #3399CC;
    }
    .comment-main {
        margin-left: 5px;
        margin-right: 30px;
        color: #888;
        line-height: 22px;
        position: relative;
        font-size: 14px;
        padding: 10px 0 5px 0px;
        word-wrap: break-word;
        max-height: 300px;
        overflow: hidden;
    }
    #respond, #postcomments {
        position: relative;
    }
    ol#comment_list {
        padding-left: 0;
		list-style: none;
    }
    div#postcomments {
    	margin-top: 20px;
    }
    </style>
	<div class="card" style="padding: 20px;">
    	<div class="title" id="comment">
    		<h3>评论</h3>
    	</div>
    	<div id="respond">
    		<form id="comment-form" name="comment-form" action="{% url 'article-comment' article.id %}" onsubmit="myFunction(this)"method="POST">
				{% csrf_token %}
    			<div class="comment">
    				<input name="user_name" id="" class="form-control" size="22" placeholder="您的昵称（必填）" maxlength="15" autocomplete="off" tabindex="1" type="text">
    				<div class="comment-box">
    					<textarea placeholder="您的评论或留言（必填）" name="body" id="comment-textarea" cols="100%" rows="3" tabindex="3"></textarea>
    					<div class="comment-ctrl">
    						<div class="comment-prompt" style="display: none;"> <i class="fa fa-spin fa-circle-o-notch"></i> <span class="comment-prompt-text">评论正在提交中...请稍后</span> </div>
    						<div class="comment-success" style="display: none;"> <i class="fa fa-check"></i> <span class="comment-prompt-text">评论提交成功...</span> </div>
    						<button type="submit" name="comment-submit" id="comment-submit" tabindex="4">评论</button>
    					</div>
    				</div>
    			</div>
    		</form>
    	</div>
    	<div id="postcomments">
    		<ol id="comment_list" class="commentlist">
			{% for comment in comment_list %}        
    		<li class="comment-content">
				<div class="comment-main">
					<p>
						<span class="time">({{comment.created_time}}) </span>
						<a class="address" rel="nofollow" draggable="false">
							{{comment.user_name}}
						</a>
						<br>
						{{comment.body}}
					</p>
				</div>
			</li>
			<div class="divider"> </div>
			{% endfor %}
			</ol>
    	</div>
    </div>
	<script>
		function myFunction(){
			if (document.forms['comment-form']['user_name'].value.length == 0) {
				alert("昵称不能为空！");
				document.comment-form.user_name.focus();
			} else if (document.forms['comment-form']['body'].value.length == 0) {
				alert("评论内容不能为空！")
			} else {
				alert("评论提交成功！");
			}
		}
	</script>
	{% endblock comments %}
{% endblock content %}
